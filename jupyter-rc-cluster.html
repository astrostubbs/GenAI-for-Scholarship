<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jupyter Notebooks on the Harvard RC Cluster — Generative AI for Scholarship</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="logos">
        <img src="HDSI.png" alt="Harvard Data Science Initiative">
        <img src="FAS.png" alt="Harvard Faculty of Arts and Sciences">
    </div>
    <h1>Generative AI for Scholarship</h1>
    <div class="sponsors">Harvard Data Science Initiative (HDSI) &amp; Faculty of Arts and Sciences (FAS)</div>
</header>

<nav>
    <a href="index.html">Home</a>
    <a href="session1-foundation.html">The Basics</a>
    <a href="session2-coder.html">The AI-Empowered Coder</a>
    <a href="session3-power-user.html">Claude Code CLI</a>
    <a href="site-map.html">Site Map</a>
    <a href="https://datascience.harvard.edu/education/generative-ai-for-graduate-students-and-postdocs/" target="_blank">Other GAI Sessions</a>
</nav>

<h2>Running Jupyter Notebooks on the Harvard RC Cluster</h2>

<p>
    For computationally intensive work, you can run Jupyter notebooks on Harvard's
    Research Computing (RC) cluster, which provides powerful hardware and integrates
    with AI tools through Harvard's HUIT Bedrock proxy.
</p>

<h2>What Is the RC Cluster?</h2>

<p>
    Harvard Research Computing provides a high-performance computing cluster
    (also known as Cannon/FASRC) with:
</p>

<ul class="resources">
    <li><strong>Powerful CPU and GPU resources</strong> for large-scale computation</li>
    <li><strong>Large-scale data storage</strong> including scratch and lab-specific filesystems</li>
    <li><strong>Pre-installed scientific software</strong> and module system</li>
    <li><strong>Jupyter notebook access</strong> through the Open OnDemand web portal</li>
</ul>

<h2>Prerequisites</h2>

<ul class="resources">
    <li><strong>Harvard RC account</strong> — request one at
        <a href="https://www.rc.fas.harvard.edu/account-request/" target="_blank">rc.fas.harvard.edu/account-request</a></li>
    <li><strong>VPN connection</strong> if accessing from off-campus
        (<a href="https://vpn.harvard.edu" target="_blank">vpn.harvard.edu</a>)</li>
    <li><strong>Basic familiarity with Linux command line</strong></li>
    <li><strong>Harvard HUIT API key</strong> (if using AI integration) — see
        <a href="setting-up-claude-code.html">API setup guide</a></li>
</ul>

<h2>Accessing Jupyter on the RC Cluster</h2>

<ol>
    <li><strong>Log in to Open OnDemand</strong>:
        <ul style="margin-top: 0.5rem;">
            <li>Go to <a href="https://rcood.rc.fas.harvard.edu" target="_blank">rcood.rc.fas.harvard.edu</a></li>
            <li>Log in with your Harvard credentials</li>
        </ul>
    </li>

    <li><strong>Launch a Jupyter notebook session</strong>:
        <ul style="margin-top: 0.5rem;">
            <li>Click <strong>"Interactive Apps"</strong> &rarr; <strong>"Jupyter Notebook"</strong></li>
            <li>Select a partition (e.g., "test" for quick jobs, "shared" for longer runs)</li>
            <li>Request resources (number of CPUs, memory, time limit)</li>
            <li>Click <strong>Launch</strong> and wait for the session to start</li>
        </ul>
    </li>

    <li><strong>Connect to your notebook</strong>:
        <ul style="margin-top: 0.5rem;">
            <li>Once the session is running, click <strong>"Connect to Jupyter"</strong></li>
            <li>This opens JupyterLab (or classic Jupyter) in your browser</li>
        </ul>
    </li>
</ol>

<h2>Setting Up AI Integration on RC</h2>

<p>
    To use Claude from within your RC Jupyter notebooks, you need to install the
    Anthropic library and configure your API credentials.
</p>

<h3>Install the Anthropic library</h3>

<p>
    In a terminal on the RC cluster (or in a notebook cell with <code>!</code>):
</p>

<pre><code>pip install --user anthropic</code></pre>

<h3>Configure your API key</h3>

<p>
    Add the following to your <code>~/.bashrc</code> on the RC cluster:
</p>

<pre><code>export ANTHROPIC_BEDROCK_BASE_URL=https://apis.huit.harvard.edu/ais-bedrock-llm/v2
export ANTHROPIC_API_KEY="your-harvard-api-key"</code></pre>

<p>Then reload your shell configuration:</p>

<pre><code>source ~/.bashrc</code></pre>

<div class="disclaimer" style="background: #fff3cd; border-left: 4px solid #ff9800;">
    <strong>Important:</strong> Never commit your API key to code repositories.
    Keep it in environment variables or secure configuration files that are
    excluded from version control.
</div>

<h2>Example: AI-Assisted Data Analysis on RC</h2>

<p>
    This example shows how to use Claude from within a Jupyter notebook running
    on the RC cluster to get help analyzing a large dataset:
</p>

<pre><code># In your RC Jupyter notebook
import anthropic
import pandas as pd
import numpy as np
import os

# Load large dataset (stored on RC cluster)
data = pd.read_csv('/n/holyscratch01/your_lab/large_dataset.csv')

# Initialize client with Harvard endpoint
client = anthropic.AnthropicBedrock(
    aws_region="us-east-1"  # Required parameter
)

prompt = f"""
I have a dataset with {len(data)} rows and columns: {list(data.columns)}.
Write Python code to:
1. Calculate correlation matrix
2. Identify top 5 most correlated variable pairs
3. Create a heatmap visualization
"""

response = client.messages.create(
    model="us.anthropic.claude-opus-4-5-20251101-v1:0",
    max_tokens=2000,
    messages=[{"role": "user", "content": prompt}]
)

print(response.content[0].text)
# Then run the generated code</code></pre>

<h2>Why Use the RC Cluster?</h2>

<ul class="resources">
    <li><strong>Computational power:</strong> Handle large datasets that won't fit on your laptop</li>
    <li><strong>Parallel processing:</strong> Run multiple analyses simultaneously across many cores</li>
    <li><strong>GPU access:</strong> For machine learning and deep learning workloads that need acceleration</li>
    <li><strong>Persistent storage:</strong> Keep large datasets and results on cluster filesystems</li>
    <li><strong>Long-running jobs:</strong> Leave analyses running without keeping your laptop on</li>
</ul>

<h2>Cost and Security Notes</h2>

<div class="disclaimer" style="background: #fff3cd; border-left: 4px solid #ff9800;">
    <h3 style="margin-top: 0; color: #ff9800;">Important Cost and Security Notes</h3>
    <ul style="margin-bottom: 0;">
        <li><strong>RC cluster usage</strong> is billed to PI accounts through FAS-RC</li>
        <li><strong>API usage</strong> is billed to PI accounts through HUIT</li>
        <li>Coordinate with your advisor about appropriate resource usage for both</li>
        <li><strong>Never commit API keys to code repositories</strong> — use environment variables</li>
        <li>Set monthly spending limits when registering your HUIT API access</li>
    </ul>
</div>

<h2>Resources</h2>

<ul class="resources">
    <li>
        <a href="https://docs.rc.fas.harvard.edu" target="_blank">RC Documentation</a>
        <span class="desc">Comprehensive documentation for Harvard's Research Computing cluster</span>
    </li>
    <li>
        <a href="https://docs.rc.fas.harvard.edu/kb/jupyter-notebook/" target="_blank">Jupyter on RC Guide</a>
        <span class="desc">Official guide for running Jupyter notebooks on the RC cluster</span>
    </li>
    <li>
        <a href="https://www.rc.fas.harvard.edu/training/" target="_blank">RC Training Materials</a>
        <span class="desc">Workshops and tutorials from the Harvard RC team</span>
    </li>
    <li>
        <a href="setting-up-claude-code.html">Setting Up Anthropic API Access (Harvard)</a>
        <span class="desc">How to obtain and configure your HUIT API key</span>
    </li>
</ul>

<footer>
    <p>
        &copy; 2026 President and Fellows of Harvard College.
        Licensed under
        <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.
    </p>
</footer>

<script data-goatcounter="https://genaiatfas.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</body>
</html>
